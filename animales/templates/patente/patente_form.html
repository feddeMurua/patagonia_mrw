{% extends "base/base_form.html" %}
{% load staticfiles %}
{% load staticfiles bootstrap3 %}
{% load widget_tweaks %}

{% block title %}Patentes{% endblock %}

{% block header-title %}Alta/Modificacion de Patente{% endblock %}

{% block url-volver %}{% url 'patentes:lista_patentes' %}{% endblock %}

{% block content %}
    <div class="container container-form">
        <form method="post">
            {% csrf_token %}
            <div class="panel panel-default">
                <div class="panel-body">
                    <div class=" panel panel-default col-md-6" id="container-form-left">
                        <div class="panel-heading persona-title">Datos de la Persona</div>
                        <div class="panel-body">
                            {% for field in patente_form %}
                            <div class="form-group">
                                <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                                {{ field|add_class:'form-control' }}
                            </div>
                            {% endfor %}
                        </div>
                        <div class="panel-heading movimiento-title">Datos de facturacion</div>
                        <div class="panel-body">
                            {% for field in mov_diario_form %}
                                <div class="form-group">
                                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                                    {{ field|add_class:'form-control' }}
                                </div>
                            {% endfor %}
                            {% for field in detalle_mov_diario_form %}
                                <div class="form-group">
                                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                                    {{ field|add_class:'form-control' }}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="panel panel-default col-md-6" id="container-form-botom-left">
                        <div class="panel-heading domicilio-title">Datos de la Mascota</div>
                        <div class="panel-body">
                            {% for field in mascota_form %}
                                <div class="form-group">
                                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                                    {{ field|add_class:'form-control' }}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="panel-footer">
                    <input type="submit" class="btn btn-primary" value="Aceptar">
                    <a class="btn btn-danger btn-cancelar" href="{% url 'patentes:lista_patentes' %}">Cancelar</a>
                </div>
            </div>
        </form>
    </div>
{% endblock %}

{% block scripts %}
    <script>
        $.datepicker.setDefaults({
            maxDate: new Date()
        });

        var tipo_pago = $('#id_tipo_pago'),
        nro_cheque = $('#id_nro_cheque').parent();
        tipo_pago.on('change', hideNroCheque);
        hideNroCheque();

        function hideNroCheque() {
            if (tipo_pago.val() == 'Cheque') {
                nro_cheque.removeClass('hidden');
            } else {
                nro_cheque.addClass('hidden');
            }
        }
    </script>
{% endblock %}
